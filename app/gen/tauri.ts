// This file was generated by [tauri-specta](https://github.com/oscartbeaumont/tauri-specta). Do not edit this file manually.

/** user-defined commands **/

export const commands = {
    /**
     * Get all list of valid global options
     */
    async listGlobalOptions(): Promise<GlobalOptions[]> {
        return await TAURI_INVOKE("list_global_options");
    },
    /**
     * Emit error message back to frontend
     */
    async emitError(error: Error): Promise<void> {
        await TAURI_INVOKE("emit_error", { error });
    },
    /**
     * Reset title to original name
     *
     * # Errors
     * if file name cannot be added to title
     */
    async resetTitle(): Promise<Result<null, Error>> {
        try {
            return { status: "ok", data: await TAURI_INVOKE("reset_title") };
        } catch (e) {
            if (e instanceof Error) throw e;
            else return { status: "error", error: e as any };
        }
    },
    /**
     * Read graph from file and return serde json value
     *
     * # Errors
     * If file cannot be read
     */
    async readGraph(filePath: string): Promise<Result<Graph, Error>> {
        try {
            return {
                status: "ok",
                data: await TAURI_INVOKE("read_graph", { filePath }),
            };
        } catch (e) {
            if (e instanceof Error) throw e;
            else return { status: "error", error: e as any };
        }
    },
    /**
     * Save graph to provided path
     *
     * # Errors
     * If file cannot be saved at provided path
     */
    async saveGraph(
        filePath: string,
        graph: Graph,
    ): Promise<Result<null, Error>> {
        try {
            return {
                status: "ok",
                data: await TAURI_INVOKE("save_graph", { filePath, graph }),
            };
        } catch (e) {
            if (e instanceof Error) throw e;
            else return { status: "error", error: e as any };
        }
    },
};

/** user-defined events **/

export const events = __makeEvents__<{
    closeGraph: CloseGraph;
    errorMessage: ErrorMessage;
    newGraph: NewGraph;
    openGraph: OpenGraph;
    saveAsGraph: SaveAsGraph;
    saveGraph: SaveGraph;
}>({
    closeGraph: "close-graph",
    errorMessage: "error-message",
    newGraph: "new-graph",
    openGraph: "open-graph",
    saveAsGraph: "save-as-graph",
    saveGraph: "save-graph",
});

/** user-defined constants **/

/** user-defined types **/

/**
 * Event for close graph
 */
export type CloseGraph = null;
/**
 * Struct representing error
 */
export type Error = {
    /**
     * main error message
     */
    message: string;
    /**
     * error
     */
    errors: string[];
};
/**
 * Event to sent a error message
 */
export type ErrorMessage = Error;
/**
 * Global options
 */
export type GlobalOptions =
    /**
     * The type of the option and any additional properties specific to that
     * type.
     */

    /**
     * A string-type option, with an optional list of valid choices.
     */
    (
        | { type: "string"; choices: string[] | null }
        /**
         * A boolean-type option, with properties specific to boolean behavior.
         */
        | {
              type: "boolean";
              support_no_prefix: boolean;
              values: TrueFalseValue | null;
          }
    ) & {
        /**
         * name of option
         */
        name: string;
        /**
         * A detailed description of the option
         */
        description: string;
        /**
         * The command-line flag associated with the option
         */
        flag: string;
    };
/**
 * Struct representing a graph
 */
export type Graph = { graph: JsonValue };
export type JsonValue =
    | null
    | boolean
    | number
    | string
    | JsonValue[]
    | { [key in string]: JsonValue };
/**
 * Event for new graph
 */
export type NewGraph = null;
/**
 * Event for open graph
 */
export type OpenGraph = null;
/**
 * Event for save as graph
 */
export type SaveAsGraph = null;
/**
 * Event for save graph
 */
export type SaveGraph = null;
/**
 * Represents custom string values for `true` and `false` states in a boolean
 * option.
 */
export type TrueFalseValue = {
    /**
     * The string representation of the `true` state
     */
    true: string;
    /**
     * The string representation of the `false` state
     */
    false: string;
};

/** tauri-specta globals **/

import {
    invoke as TAURI_INVOKE,
    Channel as TAURI_CHANNEL,
} from "@tauri-apps/api/core";
import * as TAURI_API_EVENT from "@tauri-apps/api/event";
import { type WebviewWindow as __WebviewWindow__ } from "@tauri-apps/api/webviewWindow";

type __EventObj__<T> = {
    listen: (
        cb: TAURI_API_EVENT.EventCallback<T>,
    ) => ReturnType<typeof TAURI_API_EVENT.listen<T>>;
    once: (
        cb: TAURI_API_EVENT.EventCallback<T>,
    ) => ReturnType<typeof TAURI_API_EVENT.once<T>>;
    emit: null extends T
        ? (payload?: T) => ReturnType<typeof TAURI_API_EVENT.emit>
        : (payload: T) => ReturnType<typeof TAURI_API_EVENT.emit>;
};

export type Result<T, E> =
    | { status: "ok"; data: T }
    | { status: "error"; error: E };

function __makeEvents__<T extends Record<string, any>>(
    mappings: Record<keyof T, string>,
) {
    return new Proxy(
        {} as unknown as {
            [K in keyof T]: __EventObj__<T[K]> & {
                (handle: __WebviewWindow__): __EventObj__<T[K]>;
            };
        },
        {
            get: (_, event) => {
                const name = mappings[event as keyof T];

                return new Proxy((() => {}) as any, {
                    apply: (_, __, [window]: [__WebviewWindow__]) => ({
                        listen: (arg: any) => window.listen(name, arg),
                        once: (arg: any) => window.once(name, arg),
                        emit: (arg: any) => window.emit(name, arg),
                    }),
                    get: (_, command: keyof __EventObj__<any>) => {
                        switch (command) {
                            case "listen":
                                return (arg: any) =>
                                    TAURI_API_EVENT.listen(name, arg);
                            case "once":
                                return (arg: any) =>
                                    TAURI_API_EVENT.once(name, arg);
                            case "emit":
                                return (arg: any) =>
                                    TAURI_API_EVENT.emit(name, arg);
                        }
                    },
                });
            },
        },
    );
}
